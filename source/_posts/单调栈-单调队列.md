---
title: 单调栈 & 单调队列
author: Portgas·D·Asce
categories:
  - [Data Structure & Algorithm]
tags:
  - 基础数据结构
  - 栈
  - 队列
date: 2020-12-31 18:31:38
---

<!--more-->
单调队列中的队列实际上是一个双端队列。

单调栈 / 单调队列可以用来干很多事，例如：实现最大栈，实现最大队列...

## 1 单调栈
### 1.1 实现最大栈
最大栈实现需要借助两个栈：
- 栈 $data$：保存数据；
- 栈 $mx$：保存最大值信息；

**push(x)**
- 直接将 $x$ push 到 $data$;
- 如果 $mx$ 为空 或 $x$ 大于等于 $mx$ 栈顶元素，才将 $x$ push 到 $mx$；

**pop()**
- 如果 $mx$ 栈顶元素和 $data$ 栈顶元素相同，则对 $mx$ 进行 pop；
- 直接从 $data$ 中 pop；

**top()**
- 返回 $data$ 栈顶元素；

**max()**
- 返回 $mx$ 栈顶元素；

**empty()**
- 返回 $data$ 是否为空；

**size()**
- 返回 $data$ 的大小；

```cpp
//实际上就是维护了一个单调（递增）栈
class MaxStack {
private:
    stack<int> data;
    stack<int> mx;
public:
    void push(int x) {
        data.push(x);
        if(mx.empty() || x >= mx.top()) {
            mx.push(x);
        }
    }
    void pop() {
        if(data.top() == mx.top()) {
            mx.pop();
        }
        data.pop();
    }
    int top() {
        return data.top();
    }
    int max() {
        return mx.top();
    }
    bool empty() {
        return data.empty();
    }
    int size() {
        return data.size();
    }
};
```

## 2 单调队列
### 2.1 最大队列
最大队列实现需要借助 一个队列 和 一个双端队列：
- 队列 $data$ 保存数据；
- 双端队列 $mx$ 保存最大值信息；

**push(x)**
- 直接将 $x$ push 到 $data$ 中；
- 从后往前，把 $mx$ 中比 $x$ 小的都 弹出，再把 $x$ push 到 $mx$ 中；

**pop()**
- 如果 $mx$ 队首等于 $data$ 队首，则将 $mx$ 队首弹出；
- 直接将 $data$ 队首弹出；

**front()**
- 返回 $data$ 队首；

**mx()**
- 返回 $mx$ 队首；

**empty()**
- 返回 $data$ 是否为空；

**size()**
- 返回 $data$ 的大小；

```cpp
//实际上就是维护一个单调（递减）双端队列
class MaxQueue {
private:
    queue<int> data;
    deque<int> mx;
public:
    void push(int x) {
        data.push(x);
        while(!mx.empty() && mx.back() < x) {
            mx.pop_back();
        }
        mx.push(x);
    }
    void pop() {
        if(mx.front() == data.front()) {
            mx.pop_front();
        }
        data.pop();
    }
    int front() {
        return data.front();
    }
    int max() {
        return mx.front();
    }
    bool empty() {
        return data.empty();
    }
    int size() {
        return data.size();
    }
};
```