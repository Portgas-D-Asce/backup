---
title: hexo进阶
author: Portgas·D·Asce
categories:
  - [Hexo]
tags:
  - Hexo
date: 2019-12-02 14:20:03
---
在已经搭建好站点工程，并预览到默认主题landscape的前提下，我门接着看为了设计自己的个性化主题，需要了解哪些东西（建议先将官网文档快速过一遍）。
<!-- more -->
## 1 如何设计主题
有两种方案：
- 在别人主题的基础上进行修改，得到自己的主题； 
- 从零开始设计自己的主题，听上去，好像有点麻烦，其实也挺简单的，因为有很多辅助函数的存在。
在设计自己主题之前，我们需要先了解一些基本的东西。

## 2 需要了解哪些东西
看完了官方文档，我们要了解哪些东西：
- 站点目录结构：主要工作空间就在站点目录下，对于站点目录结构有个清晰的了解（有哪些文件/文件夹，这些文件/文件夹是干嘛的等），是搭建个人博客所必须的；
- 博文相关：除了博文正文，还需要其它的什么东西；
- 主题相关：设计个人主题所必须涉及的；
## 3 站点目录结构
```
|--node_modules：存放hexo安装的插件
|--public：存放生成的站点静态文件
|--scaffolds：新建博文的模板
|--source：存放博文源文件（.md）
    |--_post：
|--themes：存放主题相关文件
|--_config.yml：站点配置文件
|--db.json：
|--package.json：记录站点所使用的插件及其版本
|--package-lock.json
```
其实，比较重要的只有source、themes、_config.yml这三个东西：
- public：
    - 执行hexo clean命令会删除该文件夹及其下所有内容；
    - 执行hexo g命令会新建该文件夹及其下的站点文件；
    - 为了了解hexo工作原理，可以研究下其目录结构；
- scaffolds：
    - 每次写一篇新的博文，你需要先创建文件，然后在文件Front-matter中再敲一遍文件名作为标题，再记录下博文的创建时间...等一系列工作；
    - 显然很麻烦，我们可以先新建一个模板，然后在创建新博文时指定模板，这时Hexo会根据模板生成相关内容，省去了一些重复的体力活；
- source：
    - 新建的博文一般会存储在_post文件夹下，除非显式指定存放目录；
- themes：
    - 主题文件夹，存放与主题相关的一切东西（layout，css，js，字体库等）；
- _config.yml:
    - 站点文件的基本信息（标题，子标题，描述，作者等）、插件的参数（部署插件、备份插件、Gitalk插件等）都需要在这里进行配置；

## 4 博文相关
博文（.md）文件由三部分组成：
- Front-matter
- 摘要
- 正文

```
---

Front-matter部分

---

摘要部分

<!-- more -->

正文部分

```
### 4.1 Front-matter
简单理解：
- 博文的元数据（文件的文件），位于博文开头，两个“---”之间的部分；
- 描述博文的一些基本信息，如：标题、创建日期、分类、标签等；
示例：
```
---
title: OpenMVG编译
date: 2019-12-12 20:31:08
categories:
- [计算机视觉, OpenMVG]
tags:
- 三维重建
- 开源库
---
```
Ps：Hexo会根据Front-matter，结合局文件生成不同的静态页面；
## 5 主题
### 5.1 主题目录结构
```
|--_config.yml：主题配置文件，记录主题的一些信息等
|--languages：语言文件夹，国际化时会用到
|--layout：布局文件夹
|--source：资源文件夹
```
### 4.2 布局
布局是一个theme主题的核心。
#### 4.2.1 理解
布局：
- 布局文件存放在themes/themename/layout路径下；
- 这里的布局也可以理解为模板的意思；
- 布局决定了网站内容的呈现方式，实际上是对不同页面的抽象；
- 搭建的博客不一定非要包含所有布局；
#### 4.2.2 布局分类
Hexo里面布局分为6类：
- index布局：即主页面布局，别人访问你个人博客一开始看到的页面的布局；
- varchives布局：归档页面布局，按发布日期整理所发布博文的页面的布局；
- categories布局：分类页面布局，按分类整理所发布博文的页面的布局；
- tags布局：标签页面布局，按标签整理所发布博文的页面的布局；
- page布局：文章页面布局，显式某篇文章具体内容的页面的布局；
- about布局：关于页面布局，关于作者一些基本信息的页面的布局；

Ps：
- 如果是在别人的主题上进行修改，一般不会更改布局/或进行一些小的更改，如果是从零开始设计自己的主题，就要仔细考虑各个布局该如何设计的问题；
- hexo会根据所有博文的分类、标签、创建日期等信息结合布局文件生成访问个人博客网站所需要的所有静态页面

#### 4.2.3 局部布局
一般来说，基本所有布局都要包含footer模块（包括，网站访问量，copyright等内容）：
- 每个布局都添加一个footer模块，显然不合理（每次改动都要改动多个地方）；
- 只保留一份footer，被其它布局共享就行，这里的footer就是一个局部布局；

#### 4.2.4 布局引擎
可以解析布局文件的引擎有EJS、Swig等，具体使用何种引擎由布局文件的后缀决定：
- layout.ejs   - 使用 EJS
- layout.swig  - 使用 Swig
### 4.3 资源文件夹
两个source文件夹：
- 站点目录下有一个source文件夹，是存放博文源文件用的；
- theme目录下也有一个source文件夹，是用于存放主题相关资源文件的地方（例如，css，js，image，字体库等）
Ps：将image放在css文件夹下是一个good idea；

## 5 结束语
通过本文，我们简单理解了以下站点的目录结构以及各种文件的一些细节，完成了搭建个人博客的准备工作。从下篇博客开始，我们将进入实战环节。