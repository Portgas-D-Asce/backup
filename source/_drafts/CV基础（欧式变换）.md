---
title: CV基础（欧式变换）
date: 2019-12-23 13:32:37
categories:
- [计算机视觉]
---
## 1 欧式变换
欧式变换？不就是：
$$p' = Rp + t$$
其中 $R$ 是一个旋转矩阵，$t$ 位移量，$p$ 和 $p'$ 是空间点的坐标，没错吧？

没错是没错，但是这么理解有点“糙”，会给理解更高深算法带来麻烦的。

所以我们先来详细看以下欧式变换：
- 两个空间直角坐标系 $i$ & $j$，坐标原点分别为 $O_i$，$O_j$；
- $O_j$ 在 $i$ 坐标系下的坐标为c；
- 从坐标系 $i$ 到 坐标系 $j$ 的旋转矩阵为 $R_{ij}$ ；
- 一空间点 $P$ 在 $i$ 坐标系下的坐标为 $p_i$；
- 则点 $P$ 在 $j$ 坐标系下的坐标为：$p_j = R_{ij} * (p_i - c) = R_{ij} * p_i + R_{ij} * (-c)$；
- 上述等式可以简写为：$p_j = R_{ij} * p_i + t, t = -R_{ij} * c$；

ps：欧式变换方程 $p_j = R_{ij} * p_i + t$ 是理解高层次理论的基础中的基础、重点中的终点，因此必须对其是如何来的，以及其中变量的含义一清二楚；

## 2 辅助坐标系
只听过相机坐标系，世界坐标系，辅助坐标系是什么？

考虑下：
- $R_{ij} * p_i$ 的结果是什么？
- 哼，难不倒我的：空间点 $P$ 在“以 $i$ 坐标系原点 $O_i$ 为坐标原点，坐标轴与 $j$ 坐标系坐标轴相同的坐标系”下的坐标；
- 是的，姑且就把上面那个坐标系称作“辅助坐标系”；
- 所以，$R_{ij} * p_i$ 表示的是 $P$ 在辅助坐标系下的坐标；

那，接着考虑欧式变换剩下的部分：
- $R_{ij} * c$ （也就是 $-t$）又表示什么？
- 这还不简单，当然是：$j$ 坐标系的坐标原点 $O_j$ 在辅助坐标系下的坐标；
- 没错，完全正确。了解以下，$t$ 有时也被称作：航向平移向量（heading translation vector）；

因此，可以这么理解欧式变化：
- 点 $P$ 在坐标系 $j$ 下的坐标等于，点 $P$ 在辅助坐标系下的坐标 减去 $O_j$ 在辅助坐标系下的坐标；

## 3 实践
一个欧式变化，要你这么婆婆妈妈地理解吗？

随你怎么说吧，接着往下看：
- 三维重建，全局式运动恢复结构，平移平均（Translation Averaging）里面涉及到一个公式：$||T_j - R_{ij}T_i - lambda_{ij} * t_{ij}|| = 0$；
- 这个我知道，真的是，乱七八糟的，怎么理解都对不上，肯定是有问题的！
- 还是太年轻，先公布答案：没有问题的。要问为什么，且听下回分解，但前提是先把上面“婆-婆-妈-妈”的内容好好过一遍。

ps：这里只是简单举了个例子说明正确理解欧式变换的重要性。

